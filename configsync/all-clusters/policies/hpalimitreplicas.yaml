apiVersion: constraints.gatekeeper.sh/v1beta1
kind: HPALimitReplicas
metadata:
  name: hpalimitreplicasconstraint
spec:
  parameters:
    invalidMaxReplicas: 5
  enforcementAction: deny
  match:
    kinds:
      - apiGroups: ["autoscaling"]
        kinds: ["HorizontalPodAutoscaler"]
#    namespaces: ["*"]
#    alternatively, scope by a selector
#    namespaceSelector:
#      matchExpressions:
#        - key: istio-injection
#          operator: In
#          values: ["enabled"]
